@page
@model IndexModel
@{
    ViewData["Title"] = "Dados Pessoais";
}

<div class="container w-75 my-5">
    <h1 class="display-4 text-center">Dados Pessoais</h1>
    <form id="formDadosPessoais" class="mt-3">
        <div class="mb-3">
            <label for="nomeCompleto" class="form-label">Nome Completo</label>
            <input type="text" class="form-control" id="nomeCompleto" placeholder="Digite seu nome completo" disabled>
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" placeholder="Digite seu email" disabled>
        </div>
        <div class="mb-3">
            <label for="telefone" class="form-label">Telefone</label>
            <input type="tel" class="form-control" id="telefone" placeholder="Digite seu telefone" disabled>
        </div>
        <div class="mb-3">
            <label for="senha" class="form-label">Senha</label>
            <input type="password" class="form-control" id="senha" placeholder="********" disabled>
        </div>

        <!-- Botões que aparecem depois de clicar em "Editar" -->
        <div id="botoesAcoes" class="d-none text-center">
            <button type="submit" class="btn btn-dark">Salvar</button>
            <button type="button" class="btn btn-light">Cancelar</button>
            <a asp-area="" asp-page="/AlterarSenha" class="btn btn-secondary">Alterar Senha</a>
        </div>
    </form>

    <!-- Botões iniciais -->
    <div id="botoesIniciais" class="text-center mt-3">
        <button id="btnEditar" class="btn btn-dark">Editar</button>
        <a asp-area="" asp-page="/AlterarSenha" class="btn btn-secondary">Alterar Senha</a>
    </div>
</div>

<script>
    // Referencia os elementos
    const form = document.getElementById('formDadosPessoais');
    const btnEditar = document.getElementById('btnEditar');
    const botoesAcoes = document.getElementById('botoesAcoes');
    const botoesIniciais = document.getElementById('botoesIniciais');
    const campos = form.querySelectorAll('input:not([type="password"])'); // Exclui o campo de senha

    // Função para habilitar campos e mostrar botões de salvar/cancelar
    btnEditar.addEventListener('click', function () {
        campos.forEach(campo => campo.disabled = false); // Habilita os campos nome, email e telefone
        botoesIniciais.classList.add('d-none'); // Esconde o botão de "Editar" e "Alterar Senha"
        botoesAcoes.classList.remove('d-none'); // Mostra os botões "Salvar" e "Cancelar" com "Alterar Senha"
    });

    // Salva os valores iniciais ao carregar a página
    const valoresIniciais = {};
    campos.forEach(campo => {
        valoresIniciais[campo.id] = campo.value;
    });

    // Função para cancelar a edição e restaurar os valores iniciais
    document.querySelector('#botoesAcoes .btn-light').addEventListener('click', function () {
        campos.forEach(campo => {
            campo.disabled = true; // Desabilita novamente os campos
            campo.value = valoresIniciais[campo.id]; // Restaura os valores iniciais
        });
        botoesAcoes.classList.add('d-none'); // Esconde os botões "Salvar" e "Cancelar"
        botoesIniciais.classList.remove('d-none'); // Mostra os botões iniciais "Editar" e "Alterar Senha"
    });

</script>